!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("fs"),require("steno"),require("path")):"function"==typeof define&&define.amd?define(["exports","fs","steno","path"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).lowdb={},e.fs,e.steno,e.path)}(this,(function(e,t,r,a){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i,n,s=o(t),c=o(a),l=function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r},w=function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};class f{constructor(e){i.set(this,void 0),n.set(this,void 0),l(this,i,e,"f"),l(this,n,new r.Writer(e),"f")}async read(){let e;try{e=await s.default.promises.readFile(w(this,i,"f"),"utf-8")}catch(e){if("ENOENT"===e.code)return null;throw e}return e}write(e){return w(this,n,"f").write(e)}}i=new WeakMap,n=new WeakMap;var d,h=function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r},u=function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};d=new WeakMap;var p,y,m=function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r},v=function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};class b{constructor(e){p.set(this,void 0),y.set(this,void 0),m(this,y,e,"f"),m(this,p,c.default.join(c.default.dirname(e),`.${c.default.basename(e)}.tmp`),"f")}read(){let e;try{e=s.default.readFileSync(v(this,y,"f"),"utf-8")}catch(e){if("ENOENT"===e.code)return null;throw e}return e}write(e){s.default.writeFileSync(v(this,p,"f"),e),s.default.renameSync(v(this,p,"f"),v(this,y,"f"))}}p=new WeakMap,y=new WeakMap;var T,E=function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r},g=function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};T=new WeakMap;var P,j=function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r},S=function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};P=new WeakMap;var O,C=function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},M=function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r};O=new WeakMap;var N,W=function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},k=function(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r};N=new WeakMap;class J extends Error{constructor(){super(),this.message="Missing Adapter"}}e.JSONFile=class{constructor(e){d.set(this,void 0),h(this,d,new f(e),"f")}async read(){const e=await u(this,d,"f").read();return null===e?null:JSON.parse(e)}write(e){return u(this,d,"f").write(JSON.stringify(e,null,2))}},e.JSONFileSync=class{constructor(e){T.set(this,void 0),E(this,T,new b(e),"f")}read(){const e=g(this,T,"f").read();return null===e?null:JSON.parse(e)}write(e){g(this,T,"f").write(JSON.stringify(e,null,2))}},e.LocalStorage=class{constructor(e){P.set(this,void 0),j(this,P,e,"f")}read(){const e=globalThis.localStorage.getItem(S(this,P,"f"));return null===e?null:JSON.parse(e)}write(e){globalThis.localStorage.setItem(S(this,P,"f"),JSON.stringify(e))}},e.Low=class{constructor(e){if(Object.defineProperty(this,"adapter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:null}),!e)throw new J;this.adapter=e}async read(){this.data=await this.adapter.read()}async write(){this.data&&await this.adapter.write(this.data)}},e.LowSync=class{constructor(e){if(Object.defineProperty(this,"adapter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:null}),!e)throw new J;this.adapter=e}read(){this.data=this.adapter.read()}write(){null!==this.data&&this.adapter.write(this.data)}},e.Memory=class{constructor(){O.set(this,null)}read(){return Promise.resolve(C(this,O,"f"))}write(e){return M(this,O,e,"f"),Promise.resolve()}},e.MemorySync=class{constructor(){N.set(this,null)}read(){return W(this,N,"f")||null}write(e){k(this,N,e,"f")}},e.TextFile=f,e.TextFileSync=b,Object.defineProperty(e,"__esModule",{value:!0})}));
